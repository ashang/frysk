2007-03-29  Andrew Cagney  <cagney@redhat.com>

	* cni/DwarfDie.cxx (get_decl_file): Ensure it always returns
	something.

2007-03-29  Tim Moore  <timoore@redhat.com>

	* DwarfDieFactory.java (DwarfDieFactory): Remove gratuitous
	references to 1.5 generics stuff.

	* DwarfException.java: New class.
	* DwException.java: New class.
	* DwarfDieFactory.java: New class.
	* DieVisitor.java: New class.
	* DwTagEncodings.shenum: List all Dwarf tags.
	* DwarfDie.java (DwarfDie class): Make abstract.
	(getScopes, getScopeVar, getType, getChild, getSibling, getDecl):
	Use DwarfDieFactory. 
	(accept): New abstract method.
	(isInlineDeclaration, getInlinedInstances, get_entrypc): New native
	methods.
	(get_tag): Make static, package accessable.
	* Dwfl.java(getFactory): New method.
	(Dwfl constructors): use it.
	* cni/DwarfDie.cxx (get_entrypc): New method implementation.
	(get_decl_file, get_decl_line): Throw DwException if error.
	(isInlineDeclaration, getInlinedInstances): New method
	implementations.
	* cni/Dwfl.cxx (dwfl_addrdie): Use DwarfDieFactory.
	* lib/dw/die: New package with wrapper classes for Dwarf Dies.

2007-03-28  Nurdin Premji  <npremji@redhat.com>

	* DwflModule.java (getAddressName): Removed.
	(getSymbol): Added.
	* SymbolBuilder.java: Added.
	* cni/DwflModule.cxx (getAddressName): Removed.
	(getSymbol): Added.

2007-03-21  Tim Moore  <timoore@redhat.com>

	* DwarfDie.java (getEntryBreakpoints): New method.
	* cni/DwarfDie.cxx (getEntryBreakpoints): Implement it.

2007-03-15  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (setScopes): New.

2007-03-06  Stan Cox  <scox@redhat.com>

	* (DwAtEncodings.shenum): Don't assume /usr/include/dwarf.h.
	* (DwOpEncodings.shenum): Likewise.
	* (DwTagEncodings.shenum): Likewise.

2007-03-06  Stan Cox  <scox@redhat.com>

	* (DwAtEncodings.shenum): New file.
	* (DwOpEncodings.shenum): New file.
	* (DwTagEncodings.shenum): New file.
	* DwarfDie.java (DwarfOp): New.
	(addOps): New.
	(getAttr): New.
	(getTag): New.
	(getAddr): Use DwarfOp.
	(getFormData): Use DwarfOp.
	(isArrayType): Remove.
	(isClassType): Remove.
	(isFormalParameter): Remove.
	(isArtificial): Remove.
	(isExternal): Remove.
	* cni/DwarfDie.cxx (get_addr): Use addOps.
	(get_attr): New.
	(get_tag): New.
	(is_array_type): Remove.
	(is_class_type): Remove.
	(is_formal_parameter): Remove.
	(is_artificial): Remove.
	(get_formdata): Remove.
	
2007-02-28  Stan Cox  <scox@redhat.com>

	* cni/DwarfDie.cxx (GETREGNO): Add x8664 specific registers.

2007-02-14  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getDataMemberLocation): New.
	* cni/DwarfDie.cxx (get_data_member_location): New.

2007-02-05  Andrew Cagney  <cagney@redhat.com>

	* tests/TestDwfl.java: Replace frysk.junit.Paths with
	frysk.junit.Runner.getProgramBasename.

2007-01-31  Nurdin Premji  <npremji@redhat.com>

	* DwflModule.java (getAddressName): Added.
	* cni/DwflModule.cxx (getAddressName): New.

2007-01-29  Stan Cox  <scox@redhat.com>

	* BaseTypes.java (getTypeSize): New.

2007-01-22  Mike Cvet  <mcvet@redhat.com>

	* Dwfl.java (getLineAddresses): Changed return type to LinkedList.

2007-01-18  Mark Wielaard  <mark@klomp.org>

	* DwflLine.java (toString): New method that gives a debug String
	representation.

2007-01-12  Mike Cvet  <mcvet@redhat.com>

	* Dwfl.java (isLineExecutable): Added.

2007-01-11  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getScopeVarNames): New.
	(addScopeVarName): New.
	* cni/DwarfDie.java (get_scopevar_names): New.

2006-12-18  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (isFormalParameter): New.
	(isArtificial): New.
	(isExternal): New.
	(toString): New.
	(getDecl): New.
	* cni/DwarfDie.cxx (is_formal_parameter): New.
	(is_artificial): New.
	(is_external): New.
	(get_decl): New.

2006-12-14  Andrew Cagney  <cagney@redhat.com>

	* Dwfl.java: Delete import of java.util.Collections.
	* tests/TestDwfl.java: Delete redundant import of
	frysk.junit.TestCase.

2006-12-14  Adam Jocksch  <ajocksch@redhat.com>

	* Dwfl.java (getLineAddresses): Fixed small bug in initializing list.

	* Dwfl.java (getLineAddresses): Now returns a list rather than a Vector
	(bug #3729).
	* TestDwfl.java (testGetAddresses): Refactored to reflect above change.

2006-12-14  Andrew Cagney  <cagney@redhat.com>

	* tests/TestDwfl.java: Use frysk .junit .Paths .getRunnerBasename.

2006-12-13  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* cni/Dwfl.cxx (dwfl_begin): Fixed `debuginfo' files search path typo.

2006-12-06  Andrew Cagney  <cagney@redhat.com>

	* NoDebugInfoException.java: Add copyright.
	* DwarfCommand.java: Ditto.

2006-11-24  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (scopes): New.
	(getScopeVar): Set it.
	(getFrameBase): Use it.
	(getFormData): Use it.	
	(getScopeIndex): New.
	* cni/DwarfDie.cxx (get_scope_var): Return scope index.

2006=11=09  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (isClassType): New.
	* cni/DwarfDie.cxx (is_class_type): New.

2006-11-03  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getType): New.
	(getBaseType): New.
	(getUpperBound): New.
	(isArrayType): New.
	(getChild): New.
	(getSibling): New.
	* cni/DwarfDie.cxx (get_type): New.
	(get_baseType): New.
	(get_upper_bound): New.
	(is_array_type): New.
	(get_child): New.
	(get_sibling): New.

2006-10-26  Tim Moore  <moore@redhat.com>

	* cni/Dwfl.cxx (dwfl_begin): Remove use of alloca.
	* cni/DwflModule.cxx (getLines): Remove use of alloca.

2006-10-25  Tim Moore  <moore@redhat.com>

	* cni/Dwfl.cxx (dwfl_begin): Declare flags variable static; its
	address is stashed in callbacks structure.
	* cni/DwflModule.cxx (getLines): fix broken use of
	JvGetStringUTFRegion and lack of terminating null.
	* tests/TestDwfl.java (testGetAddresses): re-enable.

2006-10-24  Andrew Cagney  <cagney@redhat.com>

	* tests/TestDwfl.java (testGetAddresses): Mark as broken, 3416.

2006-10-20  Stan Cox  <scox@redhat.com>

	* Dwarf.java (getSourceFiles): New.
	(cni/Dwarf.cxx) (get_source_files): New.

2006-10-20  Tim Moore  <timoore@redhat.com>

	* Dwfl.java (getModules): New method.
	(getModule): Move to CNI.
	(getLineAddresses): New method.
	* cni/Dwfl.cxx (getModule, dwfl_getmodules): New native methods.
	* DwflModule.java (getName, getLines): New methods.
	* cni/DwflModule.cxx (getName, getLines): Implementations.
	* DwflLine.java (DwflLine): Make visible to package.
	* tests/TestDwfl.java (testGetModules, testGetAddresses): New
	tests for new methods. 

2006-10-11  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getFormData): New.
	* cni/DwarfDie.cxx (get_formdata): New.

2006-10-09  Adam Jocksch  <ajocksch@redhat.com>

	* DwflLine.java: Reformatted.
	(getCompilationDir): Added.
	* cni/DwflLine.cxx (dwfl_linecomp_dir): Added.

2006-10-04  Mike Cvet  <mcvet@redhat.com>

	* Dwfl.java (getSourceLine): Added try/catch around dwfl call.

2006-10-02  Stan Cox  <scox@redhat.com>

	* cni/DwarfDie.cxx (get_scopevar): Check for DW_TAG_variable.

2006-09-29  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getFrameBase): Simplify DW_AT_frame_base handling.
	* cni/DwarfDie.cxx (get_framebase): Likewise.

2006-09-19  Mark Wielaard  <mark@klomp.org>

	* tests/cni/TestLib.cxx (getFuncAddr): Extract define out of
	function and put whole definition on one line.
	* tests/TestDwfl.java (testGetLine): Use same line number for all
	architectures.

2006-09-19  Yao Qi  <qiyaoltc@cn.ibm.com>

	* tests/TestDwfl.java (testGetLine): Skip it when build on X86_64.
	Change the line number result for powerpc64.

2006-09-18  Adam Jocksch  <ajocksch@redhat.com>

	* DwarfDie.java (isInlinedFunction): New.
	(is_inline_func): New.
	* cni/DwarfDie.cxx (is_inline_func): New.
	* tests/TestDwfl.java (testGetDie): Added commented out line to test
	isInlinedFunction, do not want to enable this right now until we
	are sure it does not break the build.

2006-09-18  Stan Cox  <scox@redhat.com>

	* DwarfDie.cxx (getScopeVar): Use JvGetStringUTFRegion.

2006-09-12  Stan Cox  <scox@redhat.com>

	* DwarfDie.java (getScopeVar): New.
	(getScope): New.
	(getDeclFile): New.
	(getDeclLine): New.
	(getAddr): New.
	(getType): New.
	(fbregVariable): New.
	(getFrameBase): New.
	* cni/DwarfDie.cxx (get_scopevar): New.
	(get_decl_file): New.
	(get_decl_line): New.
	(get_addr): New.
	(get_type): New.
	(fbreg_variable): New.
	(get_framebase): New.

2006-08-28  Andrew Cagney  <cagney@redhat.com>

	* tests/TestDwfl.java: Extend frysk.junit.TestCase.
	(trueXXX, brokenXXX): Delete, moved to frysk.junit.TestCase.

2006-08-16  Tim Moore  <timoore@redhat.com>

	* TestDwfl.java (testGetLine): Disable; it's too sensitive to compiler
	debug settings.

2006-08-07  Yao Qi  <qiyaoltc@cn.ibm.com>

	* tests/cni/TestLib.cxx (getFuncAddr): Return function
	address instead of function descriptor on PPC64.
	* tests/TestDwfl.java: Take powerpc into account, and
	change the expected line numbers.

2006-07-31  Adam Jocksch  <ajocksch@redhat.com>

	* tests/TestDwfl.java (testGetLine): Fixed, test now works on x86_64.

2006-07-27  Mark Wielaard  <mark@klomp.org>

	* tests/TestDwfl.java (testGetLine): Mark as broken bug #2965.

2006-07-25  Adam Jocksch  <ajocksch@redhat.com>

	* Dwfl.java (getDie): Now returns an instance of DwflDieBias.
	(dwfl_addrdie): Ditto.
	* DwflDieBias.java: Added.
	* DwflModule.java (getElf): Refactored to reflect the name change to
	ModuleElfBias, also moved most of the logic to the native code.
	(module_getelf): Now returns a ModuleElfBias object.
	* ModuleElfBias.java: Renamed from ModuleElfFile.java.
	* cni/Dwfl.cxx (dwfl_addrdie): Now returns a DwflDieBias object.
	* cni/DwflModule.cxx (module_getelf): Now returns a ModuleElfBias
	object.
	* tests/TestDwfl.java (testGetDie): Now uses DwflDieBias and checks for
	the returned bias.

2006-07-24  Adam Jocksch  <ajocksch@redhat.com>

	* Dwfl.java (getModule): Added.
	(dwfl_addrmodule): Added.
	* DwflModule.java: Added header and formatted to GNU formatting.
	(getElf): Added.
	(module_getelf): Added.
	* ModuleElfFile.java: Added, rename pending.
	* cni/Dwfl.cxx (dwfl_addrmodule): Added.
	* cni/DwflModule.cxx: Added.

	* test/TestDwfl.java (testGetLine): Removed checks for pc addresses,
	since they were very fragile and break given the slightest change
	(bug 2951).

2006-07-22  Andrew Cagney  <cagney@redhat.com>

	* tests/TestDwfl.java (trueXXX, brokenXXX): Add.
	(testGetLine): Disable.

2005-07-21  Adam Jocksch  <ajocksch@redhat.com>

	* tests/testDwfl.java: GNU formatted.

	* DwarfDie.java (getScopes): Added.
	(get_scopes): Added.
	* cni/DwarfDie.cxx (get_scopes): Added.
	* tests/TestDwfl.java (testGetDie): Added.

2005-07-17  Adam Jocksch  <ajocksch@redhat.com>

	* DwarfDie.java (getName): Added.
	(get_diename): Added.
	* cni/Dwarf.cxx (DWARF_POINTER): Refactored out.
	* cni/DwarfDie.cxx (DWARF_DIE_POINTER): Ditto.
	(get_diename): Added.
	* cni/Dwfl.cxxx (DWFL_POINTER): Refactored out.
	* cni/DwflLine.cxx (DWFL_LINE_POINTER): Ditto.

2005-07-14  Adam Jocksch  <ajocksch@redhat.com>

	* Dwfl.java: Changed to GNU formatting.
	(getDie): Added.
	* DwflDie.java: Changed to GNU formatting.
	(DwflDie): Now takes a pointer to a Dwfl parent object.
	(getLowPC): Added.
	(getHighPC): Added.
	* cni/DwflDie.cxx: Added.
	* cni/Dwfl.java (dwfl_addrdie): Added.

2005-06-19  Adam Jocksch  <ajocksch@redhat.com>

	* NoDebugInfoException.java: Added.

2005-06-14  Adam Jocksch  <ajocksch@redhat.com>

	* cni/Dwfl.cxx (dwfl_begin): Now uses JvAllocBytes to allocate the
	memory for the callbacks struct, so it can be kept in a RawDataManaged.

2005-06-06  Adam Jocksch  <ajocksch@redhat.com>

	* tests/TestDwfl.java (testGetLine): Now checks for correctness of
	filename, line number, and column, also removed failing assertion from
	end that was used for debugging purposes.
	
	* tests/TestDwfl.java: Added Frysk license.
	* tests/TestLib.java: Ditto.
	* tests/cni/TestLib.cxx: Ditto.

	* tests: Added.
	* tests/TestDwfl.java: Added.
	* tests/TestLib.java: Added.
	* tests/cni: Added.
	* tests/cni/TestLib.cxx: Added.

2005-06-05  Adam Jocksch  <ajocksch@redhat.com>

	* Dwfl.java (getCallbacks): Added, shouldn't be called just satisfying
	ecj.
	* Dwfl.cxx (dwfl_begin): Now properly allocates callback object.

2005-05-31  Adam Jocksch  <ajocksch@redhat.com>

	* DwflLine.java (DwflLine): Now takes a pointer to the parent Dwfl.
	(getParent): Added.
	* DwflModule.java (DwflModule): Now takes a pointer to the parent Dwfl.
	(getParent): Added.

2005-05-30  Adam Jocksch  <ajocksch@redhat.com>

	* cni/Dwfl.cxx (dwfl_begin): Fixed errors.

	* Dwfl.java (Dwfl): Now takes a pid.
	* cni/Dwfl.cxx (dwfl_begin): Now takes a pid, and calls
	dwfl_linux_proc_report for that process.

2005-05-24  Adam Jocksch  <ajocksch@redhat.com>

	* Dwarf.java: Created.
	* DwarfCommand.java: Ditto.
	* DwarfDie.java: Ditto.
	* Dwfl.java: Ditto.
	* DwflLine.java: Ditto.
	* DwflModule.java: Ditto.
	* cni: Added.
	* cni/Dwarf.cxx: Created.
	* cni/Dwfl.cxx: Ditto.
	* cni/DwflLine.cxx: Ditto.
	
