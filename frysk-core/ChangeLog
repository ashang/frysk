2005-08-02  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/proc/Task.java: Delete unused variables
	startRequest, stopRequest, and stepRequest from the state machine.

	* com/redhat/fedora/frysk/proc/Linux.java,
	com/redhat/fedora/frysk/proc/Task.java: Delete stopTask, make
	operation names consistent.
	* com/redhat/fedora/frysk/proc/TestAttach.java,
	com/redhat/fedora/frysk/proc/TestAttachThreads.java,
	com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestExiting.java,
	com/redhat/fedora/frysk/proc/TestPaused.java,
	com/redhat/fedora/frysk/proc/TestReattachThreads.java,
	com/redhat/fedora/frysk/proc/TestTerminated.java,
	com/redhat/fedora/frysk/proc/TestUnpaused.java: Update.

	* com/redhat/fedora/frysk/proc/RequestStepiTaskEvent.java: New.
	* com/redhat/fedora/frysk/proc/Task.java: Replace "step" with
	"requestStepi".  Inject a RequestStepiTaskEvent into the event
	queue and handle in the state machine.
	* com/redhat/fedora/frysk/proc/TestStep.java: Update.

	* com/redhat/fedora/frysk/proc/RequestGoTaskEvent.java: New.
	* com/redhat/fedora/frysk/proc/Task.java: Replace "go" with
	"requestGo".  Inject a RequestGoTaskEvent into the event queue and
	handle in the state machine.
	* com/redhat/fedora/frysk/proc/TestUnpaused.java,
	com/redhat/fedora/frysk/proc/TestGoAndGo.java,
	com/redhat/fedora/frysk/proc/TestStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestGoAndGo.java,
	com/redhat/fedora/frysk/proc/TestStep.java,
	com/redhat/fedora/frysk/proc/Proc.java: Update.

	* com/redhat/fedora/frysk/proc/RequestStopTaskEvent.java: New.
	* com/redhat/fedora/frysk/proc/Task.java: Replace "stop" with
	"requestStop".  Inject a RequestStopTaskEvent into the event queue
	and handle in the state machine.
	* com/redhat/fedora/frysk/proc/TestUnpaused.java,
	com/redhat/fedora/frysk/proc/TestPaused.java,
	com/redhat/fedora/frysk/proc/TestStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestStop.java,
	com/redhat/fedora/frysk/proc/TestStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestGoAndGo.java,
	com/redhat/fedora/frysk/proc/Proc.java: Update.

2005-08-01  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/proc/Linux.java: Convert SIGSTOP into
	StoppedTaskEvent.
	* com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestDetach.java,
	com/redhat/fedora/frysk/proc/TestAttachSuspended.java: Check for
	StoppedTaskEvent instead of SignaledTaskEvent.
	* com/redhat/fedora/frysk/proc/Task.java: Handle StoppedTaskEvent.
	* com/redhat/fedora/frysk/proc/StoppedTaskEvent.java: Add member
	detachHackXXX.
	* com/redhat/fedora/frysk/proc/TestReattachThreads.java: Simplify.
	
	* com/redhat/fedora/frysk/proc/TestSyscallOpen.java,
	com/redhat/fedora/frysk/proc/TestSyscall.java: Instead of
	SignaledTaskEvent, check for TrappedTaskEvent.
	* com/redhat/fedora/frysk/proc/Proc.java,
	com/redhat/fedora/frysk/proc/TestStep.java: Instead of
	SignaledTaskEvent, cast to TaskEvent,
	* com/redhat/fedora/frysk/proc/Task.java: For State, handle
	TrappedTaskEvent, delete unnecessary SignalledTaskEvent cases.
	* com/redhat/fedora/frysk/proc/Linux.java: For stop with SIGTRAP,
	create a TrappedTaskEvent.

2005-07-31  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/proc/Linux.java: Parameterize the
	TaskEvent constructors.

	* com/redhat/fedora/frysk/proc/Task.java: For State, add "name"
	 member, set using an explicit constructor parameter.  Clean up
	 toString methods.

	* com/redhat/fedora/frysk/proc/Linux.java: Delete the one
	parameter "stopped" observer.

	* com/redhat/fedora/frysk/proc/Task.java: Add "process" methods
	for SignaledTaskEvent and TrappedTaskEvent.
	* com/redhat/fedora/frysk/proc/Linux.java: Add local
	SignaledTaskEvent and TrappedTaskEvent methods.

	* com/redhat/fedora/frysk/proc/SignaledTaskEvent.java: New.
	* com/redhat/fedora/frysk/proc/TrappedTaskEvent.java: New.
	* com/redhat/fedora/frysk/proc/Linux.java,
	com/redhat/fedora/frysk/proc/Proc.java,
	com/redhat/fedora/frysk/proc/StoppedTaskEvent.java,
	com/redhat/fedora/frysk/proc/Task.java,
	com/redhat/fedora/frysk/proc/TestAttachSuspended.java,
	com/redhat/fedora/frysk/proc/TestDetach.java,
	com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestI386Regs.java,
	com/redhat/fedora/frysk/proc/TestReattachThreads.java,
	com/redhat/fedora/frysk/proc/TestStep.java,
	com/redhat/fedora/frysk/proc/TestSyscall.java,
	com/redhat/fedora/frysk/proc/TestSyscallOpen.java,
	com/redhat/fedora/frysk/proc/TestUnpaused.java: Replace
	StoppedTaskEvent with SignaledTaskEvent.

	* com/redhat/fedora/frysk/proc/ClonedTaskEvent.java,
	com/redhat/fedora/frysk/proc/ExecedTaskEvent.java,
	com/redhat/fedora/frysk/proc/ExitedTaskEvent.java,
	com/redhat/fedora/frysk/proc/ExitingTaskEvent.java,
	com/redhat/fedora/frysk/proc/ForkedTaskEvent.java,
	com/redhat/fedora/frysk/proc/StoppedTaskEvent.java,
	com/redhat/fedora/frysk/proc/SyscallTaskEvent.java,
	com/redhat/fedora/frysk/proc/TaskEvent.java,
	com/redhat/fedora/frysk/proc/TerminatedTaskEvent.java: Delete
	unnecessary public constructor and unused "execute" method.
	* com/redhat/fedora/frysk/proc/EventLoop.java: Delete unused
	TaskEvent instances.

2005-07-30  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/proc/Linux.java,
	com/redhat/fedora/frysk/proc/Task.java: Delete "isTrapSig" and
	"isStopSig".

	* com/redhat/fedora/frysk/proc/SysUtils.Java,
	com/redhat/fedora/frysk/proc/cni/SysUtils.cxx: Delete files,
	signal functions replaced by sys.Sig.
	* com/redhat/fedora/frysk/proc/Linux.java,
	com/redhat/fedora/frysk/proc/Task.java,
	com/redhat/fedora/frysk/proc/TestAttach.java,
	com/redhat/fedora/frysk/proc/TestAttachThreads.java,
	com/redhat/fedora/frysk/proc/TestDetach.java,
	com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestExiting.java,
	com/redhat/fedora/frysk/proc/TestPaused.java,
	com/redhat/fedora/frysk/proc/TestProcStop.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo2.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestReattachThreads.java,
	com/redhat/fedora/frysk/proc/TestStep.java,
	com/redhat/fedora/frysk/proc/TestStop.java,
	com/redhat/fedora/frysk/proc/TestStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestTerminated.java,
	com/redhat/fedora/frysk/proc/TestUnpaused.java: Use sys.Sig.

	* com/redhat/fedora/frysk/proc/SysUtils.java,
	com/redhat/fedora/frysk/proc/cni/SysUtils.cxx: Delete "infLoop",
	"infThreadLoop", and "suspendedProg"; moved to sys.XXX.
	* com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestUnpaused.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo2.java,
	com/redhat/fedora/frysk/proc/TestReattachThreads.java,
	com/redhat/fedora/frysk/proc/TestAttachThreads.java,
	com/redhat/fedora/frysk/proc/TestAttach.java,
	com/redhat/fedora/frysk/proc/TestProcStop.java,
	com/redhat/fedora/frysk/proc/TestPaused.java,
	com/redhat/fedora/frysk/proc/TestStop.java,
	com/redhat/fedora/frysk/proc/TestStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestAttachSuspended.java,
	com/redhat/fedora/frysk/proc/TestGoAndGo.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo.java: Update to
	use sys.XXX.

	* com/redhat/fedora/frysk/proc/SysUtils.java,
	com/redhat/fedora/frysk/proc/cni/SysUtils.cxx: Delete "kill" and
	"tkill".
	* com/redhat/fedora/frysk/proc/TestAttachSuspended.java,
	com/redhat/fedora/frysk/proc/TestDetach.java,
	com/redhat/fedora/frysk/proc/TestDetachThreads.java,
	com/redhat/fedora/frysk/proc/TestGoAndGo.java,
	com/redhat/fedora/frysk/proc/TestPaused.java,
	com/redhat/fedora/frysk/proc/TestProcStop.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndGo2.java,
	com/redhat/fedora/frysk/proc/TestProcStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestReattachThreads.java,
	com/redhat/fedora/frysk/proc/TestStep.java,
	com/redhat/fedora/frysk/proc/TestStop.java,
	com/redhat/fedora/frysk/proc/TestStopAndGo.java,
	com/redhat/fedora/frysk/proc/TestStopAndStop.java,
	com/redhat/fedora/frysk/proc/TestUnpaused.java: Use Signal.kill.

	* com/redhat/fedora/frysk/proc/cni/SysUtils.cxx,
	com/redhat/fedora/frysk/proc/SysUtils.java: Add sigchld.
	* com/redhat/fedora/frysk/proc/Linux.java: Use SysUtils.
	* com/redhat/fedora/frysk/proc/cni/Linux.cxx: Delete.
	
	* com/redhat/fedora/frysk/proc/cni/Linux.cxx: Don't include
	"com/redhat/fedora/frysk/proc/Linux$EventLoop$WaitEvent.h".

2005-07-29  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/proc/cni/Linux.cxx: Delete
	"WaitEvet.execute" and corresponding support routines.
	* com/redhat/fedora/frysk/proc/Linux.java: Replace WaitEvent
	observer with individual Wait.Observer's.

2005-07-28  Andrew Cagney  <cagney@redhat.com>
	    Jeff Johnston  <jjohnstn@redhat.com>

	* Makefile.am (prog_perf_clone_SOURCES, prog_perf_clone_LDADD) 
	(prog_perf_fork_SOURCES, prog_perf_fork_LDADD) 
	(prog_fib_clone_SOURCES, prog_fib_clone_LDADD) 
	(prog_fib_fork_SOURCES, prog_print_argv_SOURCES) 
	(prog_print_auxv_SOURCES, prog_print_argc_SOURCES) 
	(prog_syscall_syscalls_SOURCES, prog_print_envp_SOURCES) 
	(prog_step_infThreadLoop_SOURCES, prog_step_infThreadLoop_LDADD) 
	(prog_syscall_exec_SOURCES, prog_syscall_threadexec_SOURCES) 
	(prog_syscall_threadexec_SOURCES, prog_syscall_threadexec_LDADD) 
	(prog_syscall_syscallloop_SOURCES, noinst_PROGRAMS) 
	(prog_terminated_infloop_SOURCES, prog_x86isa_x86regs_SOURCES) 
	(prog_util_auxv_SOURCES, prog_util_run_SOURCES): Define.
	(AM_GCJFLAGS): Include from frysk-sys's build directory.
	* com/redhat/fedora/frysk/proc/AllStoppedProcEvent.java: New file.
	* com/redhat/fedora/frysk/proc/Auxv.java: New file.
	* com/redhat/fedora/frysk/proc/ByteOrder.java: New file.
	* com/redhat/fedora/frysk/proc/ClonedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/EventLoop.java: New file.
	* com/redhat/fedora/frysk/proc/ExecedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/ExitedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/ExitingTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/ForkedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/I386Linux.java: New file.
	* com/redhat/fedora/frysk/proc/Isa.java: New file.
	* com/redhat/fedora/frysk/proc/Linux.java: New file.
	* com/redhat/fedora/frysk/proc/Manager.java: New file.
	* com/redhat/fedora/frysk/proc/PowerPcLinux.java: New file.
	* com/redhat/fedora/frysk/proc/Proc.java: New file.
	* com/redhat/fedora/frysk/proc/ProcEvent.java: New file.
	* com/redhat/fedora/frysk/proc/ProcEventObservable.java: New file.
	* com/redhat/fedora/frysk/proc/ProcFactory.java: New file.
	* com/redhat/fedora/frysk/proc/PsEvent.java: New file.
	* com/redhat/fedora/frysk/proc/PsListener.java: New file.
	* com/redhat/fedora/frysk/proc/PsObserver.java: New file.
	* com/redhat/fedora/frysk/proc/Register.java: New file.
	* com/redhat/fedora/frysk/proc/StoppedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/SysUtils.java: New file.
	* com/redhat/fedora/frysk/proc/Syscall.java: New file.
	* com/redhat/fedora/frysk/proc/SyscallEventInfo.java: New file.
	* com/redhat/fedora/frysk/proc/SyscallTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/Task.java: New file.
	* com/redhat/fedora/frysk/proc/TaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/TaskEventObservable.java: New file.
	* com/redhat/fedora/frysk/proc/TaskFactory.java: New file.
	* com/redhat/fedora/frysk/proc/TaskId.java: New file.
	* com/redhat/fedora/frysk/proc/TerminatedTaskEvent.java: New file.
	* com/redhat/fedora/frysk/proc/TestAttach.java: New file.
	* com/redhat/fedora/frysk/proc/TestAttachSuspended.java: New file.
	* com/redhat/fedora/frysk/proc/TestAttachThreads.java: New file.
	* com/redhat/fedora/frysk/proc/TestAuxv.java: New file.
	* com/redhat/fedora/frysk/proc/TestClone.java: New file.
	* com/redhat/fedora/frysk/proc/TestDetach.java: New file.
	* com/redhat/fedora/frysk/proc/TestDetachThreads.java: New file.
	* com/redhat/fedora/frysk/proc/TestExec.java: New file.
	* com/redhat/fedora/frysk/proc/TestExiting.java: New file.
	* com/redhat/fedora/frysk/proc/TestFork.java: New file.
	* com/redhat/fedora/frysk/proc/TestGoAndGo.java: New file.
	* com/redhat/fedora/frysk/proc/TestI386Regs.java: New file.
	* com/redhat/fedora/frysk/proc/TestPaused.java: New file.
	* com/redhat/fedora/frysk/proc/TestProcStop.java: New file.
	* com/redhat/fedora/frysk/proc/TestProcStopAndGo.java: New file.
	* com/redhat/fedora/frysk/proc/TestProcStopAndGo2.java: New file.
	* com/redhat/fedora/frysk/proc/TestProcStopAndStop.java: New file.
	* com/redhat/fedora/frysk/proc/TestPsObserver.java: New file.
	* com/redhat/fedora/frysk/proc/TestReattachThreads.java: New file.
	* com/redhat/fedora/frysk/proc/TestRun.java: New file.
	* com/redhat/fedora/frysk/proc/TestStep.java: New file.
	* com/redhat/fedora/frysk/proc/TestStop.java: New file.
	* com/redhat/fedora/frysk/proc/TestStopAndGo.java: New file.
	* com/redhat/fedora/frysk/proc/TestStopAndStop.java: New file.
	* com/redhat/fedora/frysk/proc/TestSyscall.java: New file.
	* com/redhat/fedora/frysk/proc/TestSyscall2.java: New file.
	* com/redhat/fedora/frysk/proc/TestSyscallOpen.java: New file.
	* com/redhat/fedora/frysk/proc/TestTerminated.java: New file.
	* com/redhat/fedora/frysk/proc/TestThreadExec.java: New file.
	* com/redhat/fedora/frysk/proc/TestUnpaused.java: New file.
	* com/redhat/fedora/frysk/proc/X8664Linux.java: New file.
	* com/redhat/fedora/frysk/proc/cni/Linux.cxx: New file.
	* com/redhat/fedora/frysk/proc/cni/SysUtils.cxx: New file.
	* include/linux.ptrace.h: New file.
	* prog/fib/clone.c: New file.
	* prog/fib/fork.c: New file.
	* prog/perf/README: New file.
	* prog/perf/clone.c: New file.
	* prog/perf/clone.sh: New file.
	* prog/perf/fork.c: New file.
	* prog/print/argc.c: New file.
	* prog/print/argv.c: New file.
	* prog/print/auxv.c: New file.
	* prog/print/envp.c: New file.
	* prog/step/infThreadLoop.c: New file.
	* prog/syscall/exec.c: New file.
	* prog/syscall/syscallloop.c: New file.
	* prog/syscall/syscalls.c: New file.
	* prog/syscall/threadexec.c: New file.
	* prog/terminated/infloop.c: New file.
	* prog/util/auxv.java: New file.
	* prog/util/run.java: New file.
	* prog/x86isa/x86regs.S: New file.
	* include/linux.ptrace.h: New file (copied from the Linux kernel
	headers)

2005-07-27  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/event/EventLoop.java: Update to use the
	static Poll.SignalSet methods.

2005-07-26  Andrew Cagney  <cagney@redhat.com>

	* Makefile.am (LDADD): Refer to frysk-sys, not Sys.

2005-07-22  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/model/RegisterSet.java: Remove reference
	to package proc.
	* configure.ac: New file.
	* Makefile.am: New file.
	* autogen.sh: New file.
	* .cvsignore: New file.
		
2005-07-21  Andrew Cagney  <cagney@redhat.com>

	* com/redhat/fedora/frysk/event/Event.java: New file.
	* com/redhat/fedora/frysk/event/EventLoop.java: New file.
	* com/redhat/fedora/frysk/event/PollEvent.java: New file.
	* com/redhat/fedora/frysk/event/SignalEvent.java: New file.
	* com/redhat/fedora/frysk/event/TestEventLoop.java: New file.
	* com/redhat/fedora/frysk/event/TimerEvent.java: New file.
	* com/redhat/fedora/frysk/model/Abi.java: New file.
	* com/redhat/fedora/frysk/model/Action.java: New file.
	* com/redhat/fedora/frysk/model/Address.java: New file.
	* com/redhat/fedora/frysk/model/Block.java: New file.
	* com/redhat/fedora/frysk/model/Breakpoint.java: New file.
	* com/redhat/fedora/frysk/model/Cli.java: New file.
	* com/redhat/fedora/frysk/model/Command.java: New file.
	* com/redhat/fedora/frysk/model/Condition.java: New file.
	* com/redhat/fedora/frysk/model/Corefile.java: New file.
	* com/redhat/fedora/frysk/model/Cwd.java: New file.
	* com/redhat/fedora/frysk/model/DebugInfo.java: New file.
	* com/redhat/fedora/frysk/model/DebugSymbol.java: New file.
	* com/redhat/fedora/frysk/model/Debuginfo.java: New file.
	* com/redhat/fedora/frysk/model/Event.java: New file.
	* com/redhat/fedora/frysk/model/Exception.java: New file.
	* com/redhat/fedora/frysk/model/Expression.java: New file.
	* com/redhat/fedora/frysk/model/File.java: New file.
	* com/redhat/fedora/frysk/model/Frame.java: New file.
	* com/redhat/fedora/frysk/model/Function.java: New file.
	* com/redhat/fedora/frysk/model/Futex.java: New file.
	* com/redhat/fedora/frysk/model/Gui.java: New file.
	* com/redhat/fedora/frysk/model/HeaderFile.java: New file.
	* com/redhat/fedora/frysk/model/Language.java: New file.
	* com/redhat/fedora/frysk/model/LineTable.java: New file.
	* com/redhat/fedora/frysk/model/Location.java: New file.
	* com/redhat/fedora/frysk/model/Map.java: New file.
	* com/redhat/fedora/frysk/model/MemoryLocation.java: New file.
	* com/redhat/fedora/frysk/model/Method.java: New file.
	* com/redhat/fedora/frysk/model/Mi.java: New file.
	* com/redhat/fedora/frysk/model/MinimalSymbol.java: New file.
	* com/redhat/fedora/frysk/model/Mutex.java: New file.
	* com/redhat/fedora/frysk/model/ObjectFile.java: New file.
	* com/redhat/fedora/frysk/model/Operand.java: New file.
	* com/redhat/fedora/frysk/model/Operator.java: New file.
	* com/redhat/fedora/frysk/model/Pie.java: New file.
	* com/redhat/fedora/frysk/model/PosixThread.java: New file.
	* com/redhat/fedora/frysk/model/Program.java: New file.
	* com/redhat/fedora/frysk/model/Protocol.java: New file.
	* com/redhat/fedora/frysk/model/RegisterLocation.java: New file.
	* com/redhat/fedora/frysk/model/RegisterSet.java: New file.
	* com/redhat/fedora/frysk/model/Section.java: New file.
	* com/redhat/fedora/frysk/model/Segment.java: New file.
	* com/redhat/fedora/frysk/model/Semaphore.java: New file.
	* com/redhat/fedora/frysk/model/SharedLibrary.java: New file.
	* com/redhat/fedora/frysk/model/Signal.java: New file.
	* com/redhat/fedora/frysk/model/SourceFile.java: New file.
	* com/redhat/fedora/frysk/model/Stack.java: New file.
	* com/redhat/fedora/frysk/model/State.java: New file.
	* com/redhat/fedora/frysk/model/Symbol.java: New file.
	* com/redhat/fedora/frysk/model/SymbolTable.java: New file.
	* com/redhat/fedora/frysk/model/Terminal.java: New file.
	* com/redhat/fedora/frysk/model/Thread.java: New file.
	* com/redhat/fedora/frysk/model/Tracepoint.java: New file.
	* com/redhat/fedora/frysk/model/Type.java: New file.
	* com/redhat/fedora/frysk/model/Variable.java: New file.
	* com/redhat/fedora/frysk/model/Watchpoint.java: New file.
